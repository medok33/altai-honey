<!-- Как мы работаем - ОБНОВЛЕННЫЙ РАЗДЕЛ -->
<section id="workflow" class="py-16 md:py-20 bg-[#F5DEB3] bg-opacity-20 texture-bg section-animate">
  <div class="workflow-container">
    <h2 class="workflow-title">Как мы работаем</h2>
    
    <div class="workflow-steps">
      <!-- Шаг 1 -->
      <div class="step-circle">
        <div class="step-number">1</div>
        <div class="step-content">
          <h3 class="step-title">Вы оставляете заявку</h3>
        </div>
        <div class="icon-container">
          <div class="orbit-icon">
            <img src="/images/icons/chat.svg" alt="Заявка" class="w-7 h-7">
          </div>
        </div>
      </div>
      
      <!-- Шаг 2 -->
      <div class="step-circle">
        <div class="step-number">2</div>
        <div class="step-content">
          <h3 class="step-title">Мы связываемся с вами</h3>
        </div>
        <div class="icon-container">
          <div class="orbit-icon">
            <img src="/images/icons/phone.svg" alt="Звонок" class="w-7 h-7">
          </div>
        </div>
      </div>
      
      <!-- Шаг 3 -->
      <div class="step-circle">
        <div class="step-number">3</div>
        <div class="step-content">
          <h3 class="step-title">Отправляем вам мед</h3>
        </div>
        <div class="icon-container">
          <div class="orbit-icon">
            <img src="/images/icons/truck.svg" alt="Доставка" class="w-7 h-7">
          </div>
        </div>
      </div>
      
      <!-- Шаг 4 -->
      <div class="step-circle">
        <div class="step-number">4</div>
        <div class="step-content">
          <h3 class="step-title">Вы наслаждаетесь вкусом</h3>
        </div>
        <div class="icon-container">
          <div class="orbit-icon">
            <img src="/images/icons/gift.svg" alt="Подарок" class="w-7 h-7">
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<style>
/* =============== ОБНОВЛЕННЫЕ СТИЛИ ДЛЯ РАЗДЕЛА "КАК МЫ РАБОТАЕМ" =============== */

/* Контейнер для всего раздела */
.workflow-container {
  position: relative;
  padding: 60px 0;
  overflow: hidden;
}

/* Заголовок раздела */
.workflow-title {
  text-align: center;
  margin-bottom: 60px;
  font-family: 'Pacifico', cursive;
  font-size: 2.5rem;
  color: #8B4513;
}

/* Обертка для шагов - увеличен gap */
.workflow-steps {
  display: flex;
  justify-content: center;
  flex-wrap: wrap;
  gap: 50px;
  position: relative;
  z-index: 2;
}

/* Основной круг шага */
.step-circle {
  position: relative;
  width: 200px;
  height: 200px;
  border-radius: 50%;
  background: white;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  box-shadow: 0 8px 25px rgba(139, 69, 19, 0.15);
  border: 2px solid #8B4513;
  transition: all 0.4s ease;
  cursor: pointer;
}

/* Номер шага (фон) */
.step-number {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-size: 100px;
  font-weight: 800;
  color: rgba(139, 69, 19, 0.08);
  z-index: 1;
  pointer-events: none;
}

/* Контент внутри круга */
.step-content {
  position: relative;
  z-index: 3;
  text-align: center;
  padding: 20px;
}

/* Заголовок шага */
.step-title {
  font-size: 18px;
  font-weight: 700;
  color: #2d3748;
  line-height: 1.4;
  margin: 0;
}

/* Контейнер для иконки с анимацией */
.icon-container {
  position: absolute;
  top: 50%;
  left: 50%;
  width: 60px;
  height: 60px;
  /* Начальное положение: 30 градусов по часовой стрелке */
  transform: rotate(30deg) translate(100px) rotate(-30deg);
  transform-origin: center;
  z-index: 4;
  transition: transform 0.3s ease;
}

/* Иконка внутри контейнера */
.orbit-icon {
  position: absolute;
  top: 0;
  left: 0;
  width: 60px;
  height: 60px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: white;
  border-radius: 50%;
  border: 2px solid #8B4513;
  box-shadow: 0 4px 15px rgba(0,0,0,0.1);
}

/* Анимация вращения по орбите */
@keyframes orbitRotation {
  0% {
    transform: rotate(30deg) translate(100px) rotate(-30deg);
  }
  100% {
    transform: rotate(390deg) translate(100px) rotate(-390deg);
  }
}

/* При наведении запускаем анимацию */
.step-circle:hover .icon-container {
  animation: orbitRotation 8s linear infinite;
}

/* Адаптация для планшетов */
@media (max-width: 1024px) {
  .step-circle {
    width: 180px;
    height: 180px;
  }
  
  .icon-container {
    transform: rotate(30deg) translate(90px) rotate(-30deg);
  }
  
  @keyframes orbitRotation {
    0% {
      transform: rotate(30deg) translate(90px) rotate(-30deg);
    }
    100% {
      transform: rotate(390deg) translate(90px) rotate(-390deg);
    }
  }
}

/* Адаптация для мобильных */
@media (max-width: 768px) {
  .workflow-steps {
    flex-direction: column;
    align-items: center;
    gap: 60px;
  }
  
  .step-circle {
    width: 170px;
    height: 170px;
  }
  
  .icon-container {
    transform: rotate(30deg) translate(85px) rotate(-30deg);
  }
  
  @keyframes orbitRotation {
    0% {
      transform: rotate(30deg) translate(85px) rotate(-30deg);
    }
    100% {
      transform: rotate(390deg) translate(85px) rotate(-390deg);
    }
  }
}

/* Адаптация для маленьких экранов */
@media (max-width: 480px) {
  .step-circle {
    width: 160px;
    height: 160px;
  }
  
  .icon-container {
    transform: rotate(30deg) translate(80px) rotate(-30deg);
  }
  
  @keyframes orbitRotation {
    0% {
      transform: rotate(30deg) translate(80px) rotate(-30deg);
    }
    100% {
      transform: rotate(390deg) translate(80px) rotate(-390deg);
    }
  }
}

/* Анимация для появления шагов */
.step-circle {
  opacity: 0;
  transform: translateY(30px);
  transition: opacity 0.6s ease-out, transform 0.6s ease-out;
}

.step-visible {
  opacity: 1;
  transform: translateY(0);
}

/* Задержки для анимации шагов */
.step-circle:nth-child(1) { transition-delay: 0.1s; }
.step-circle:nth-child(2) { transition-delay: 0.2s; }
.step-circle:nth-child(3) { transition-delay: 0.3s; }
.step-circle:nth-child(4) { transition-delay: 0.4s; }
</style>

<script>
// В конец существующего скрипта добавить:
document.addEventListener('DOMContentLoaded', function() {
  // ... существующий код ...
  
  // Анимация для шагов в блоке "Как мы работаем"
  const workflowSteps = document.querySelectorAll('.step-circle');
  
  const stepObserver = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        setTimeout(() => {
          entry.target.classList.add('step-visible');
        }, 300);
      }
    });
  }, {
    threshold: 0.2
  });
  
  workflowSteps.forEach(step => {
    stepObserver.observe(step);
  });
});
</script>
