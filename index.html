<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<link rel="canonical" href="https://altaymed.shop/">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Алтайский мёд - Натуральные продукты пчеловодства</title>
<meta name="description" content="Натуральный алтайский мёд от производителя. Доставка по всей России.">

<style>
  .hero-section {
    position: relative;
    min-height: 60vh;
    overflow: hidden;
  }
  @media (min-width: 768px) {
    .hero-section {
      min-height: 80vh;
    }
  }
  
  .hero-image {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
    object-position: center;
    z-index: 0;
  }
  
  .hero-section::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(rgba(0,0,0,0.4), rgba(0,0,0,0.4));
    z-index: 1;
  }
  
  .critical-content {
    position: relative;
    z-index: 10;
  }
  
  /* …остальной inline-CSS… */
  
  /* Стили для ошибок */
  .error-message {
    display: none;
    color: #e53e3e;
    font-size: 0.875rem;
    margin-top: 0.25rem;
    animation: fadeIn 0.3s ease;
  }
  
  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(-5px); }
    to { opacity: 1; transform: translateY(0); }
  }
  
  .input-error {
    border-color: #e53e3e !important;
    box-shadow: 0 0 0 2px rgba(229, 62, 62, 0.2);
  }
  
  .error-visible {
    display: block;
  }

  /* Новые стили футера */
  footer {
    width: 100% !important;
    box-sizing: border-box !important;
    position: relative;
    overflow: hidden;
    background-color: #8B4513;
    z-index: 1;
    padding: 3rem 0;
  }
  footer::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    width: 600%;
    height: 600%;
    background-image: 
      linear-gradient(rgba(255, 255, 255, 0.15) 1px, transparent 1px),
      linear-gradient(90deg, rgba(255, 255, 255, 0.15) 1px, transparent 1px);
    background-size: 108px 108px;
    transform: rotate(30deg);
    transform-origin: 0 0;
    opacity: 0.6;
    z-index: 0;
    margin-left: -220%;
    margin-top: -220%;
  }
  footer .container {
    width: 100% !important;
    max-width: 100% !important;
    padding: 0 1.5rem !important;
    position: relative;
    z-index: 1;
  }
  footer .grid {
    width: 100% !important;
    display: grid !important;
    grid-template-columns: repeat(1, minmax(0, 1fr)) !important;
    gap: 2rem;
  }
  @media (min-width: 768px) {
    footer .grid {
      grid-template-columns: repeat(5, minmax(0, 1fr)) !important;
    }
  }
  .footer-column {
    display: flex !important;
    flex-direction: column !important;
    align-items: flex-start !important;
    width: 100% !important;
    padding: 0 !important;
    margin: 0 !important;
    box-sizing: border-box !important;
  }
  .footer-column h4 {
    text-align: left !important;
    width: 100% !important;
    padding: 0 !important;
    margin: 0 0 0.64rem 0 !important;
    font-weight: bold !important;
    font-size: 1.125rem !important;
    line-height: 1.75rem !important;
    color: white !important;
  }
  .footer-column ul {
    display: flex !important;
    flex-direction: column !important;
    align-items: flex-start !important;
    width: 100% !important;
    padding: 0 !important;
    margin: 0 !important;
    list-style: none !important;
  }
  .footer-column li {
    width: 100% !important;
    text-align: left !important;
    list-style-type: none !important;
    padding: 0 !important;
    margin: 0 !important;
    box-sizing: border-box !important;
  }
  .footer-column li a {
    display: flex !important;
    align-items: center !important;
    width: 100% !important;
    box-sizing: border-box !important;
    text-decoration: none;
    transition: color 0.3s;
    color: white !important;
  }
  .footer-column li a:hover {
    color: #d1d5db !important;
  }
  .footer-column .bullet {
    display: inline-block !important;
    width: 6px !important;
    height: 6px !important;
    background-color: white !important;
    border-radius: 50% !important;
    margin-right: 10px !important;
    flex-shrink: 0 !important;
  }
  .social-icon-bw {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background: transparent;
    transition: all 0.3s;
    border: 0.5px solid rgba(255, 255, 255, 0.7); /* Тонкая белая граница */
    color: rgba(255, 255, 255, 0.7);
    flex-shrink: 0;
  }
  .social-icon-bw:hover {
    background: rgba(255, 255, 255, 0.1);
    border-color: #6B8E23;
    color: white;
  }
  .icon-inner {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 24px;
    height: 24px;
    position: relative;
  }
  .icon-inner svg {
    width: 100%;
    height: 100%;
  }
  .footer-link-item {
    display: flex;
    align-items: center;
    padding-top: 0.21rem !important;
    padding-bottom: 0.21rem !important;
  }
  .contact-icon {
    display: flex;
    align-items: center;
    justify-content: center;
    margin-right: 12px;
    flex-shrink: 0;
    width: 24px;
    font-size: 1.1rem;
  }
  .contact-text {
    flex-grow: 1;
    line-height: 1.5;
    font-size: 0.875rem;
  }
  #footer-contacts .footer-column:first-child,
  #footer-contacts .footer-column:first-child * {
    color: white !important;
  }
  .footer-column:first-child {
    justify-content: flex-start;
    margin-top: -5%; /* Подняли на 5% выше */
  }
  .footer-column:first-child .logo-wrapper {
    margin-bottom: 0.4rem;
  }
  .footer-column:first-child .description-wrapper {
    display: flex;
    flex-direction: column;
    height: 100%;
  }
  .footer-column:first-child .description-wrapper p {
    margin: 0;
    font-size: 0.76rem;
    line-height: 1.25;
    color: white !important;
  }
  .footer-column:first-child .description-wrapper p:first-child {
    margin-bottom: 0.3rem;
  }
  .footer-social-icons {
    display: flex;
    gap: 10px;
    margin-top: 1.5rem;
  }
  
  /* Стиль для иконки Авито */
  .avito-icon-bw svg {
    filter: brightness(0) invert(1); /* Белый цвет */
  }
</style>

<!-- Предзагрузка критических ресурсов -->
<!-- CSS -->
<link rel="preload" href="/assets/css/tailwind.min.css" as="style">
<link rel="stylesheet" href="/assets/css/tailwind.min.css">
<!-- Шрифты -->
<link rel="preload" href="/fonts/Pacifico-Regular.woff2"      as="font" type="font/woff2" crossorigin>
<link rel="preload" href="/fonts/OpenSans-Regular.woff2"      as="font" type="font/woff2" crossorigin>
<link rel="preload" href="/fonts/OpenSans-Medium.woff2"       as="font" type="font/woff2" crossorigin>
<link rel="preload" href="/fonts/OpenSans-SemiBold.woff2"     as="font" type="font/woff2" crossorigin>
<link rel="preload" href="/fonts/OpenSans-Bold.woff2"         as="font" type="font/woff2" crossorigin>
<link rel="preload" href="/assets/fonts/remixicon/remixicon.woff2" as="font" type="font/woff2" crossorigin>

<!-- Иконки и фавиконки -->
<link rel="preload" href="/images/favicon.ico"                as="image" type="image/x-icon">
<link rel="preload" href="/images/favicon.svg"                as="image" type="image/svg+xml">
<link rel="preload" href="/images/apple-touch-icon.png"       as="image" type="image/png">


<!-- Мета-теги верификации -->
<meta name="yandex-verification" content="9c5350476939e370">
<meta name="google-site-verification" content="JsJoSVyM5o4vxTSdN88FHLrAwPaoQ0nEjpJkiub50AE">

<!-- Open Graph -->
<meta property="og:title" content="Алтайский мёд - Натуральные продукты пчеловодства">
<meta property="og:description" content="Экологически чистый мёд с Алтайских гор. Доставка по всей России">
<meta property="og:image" content="https://altaymed.shop/images/og-preview.webp">
<meta property="og:url" content="https://altaymed.shop">
<meta property="og:type" content="website">

<!-- Twitter Card -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="Алтайский мёд - Натуральные продукты пчеловодства">
<meta name="twitter:description" content="Экологически чистый мёд с Алтайских гор">
<meta name="twitter:image" content="https://altaymed.shop/images/twitter-preview.webp">

<!-- Favicon -->
<link rel="icon" href="images/favicon.ico" sizes="any">
<link rel="icon" href="images/favicon.svg" type="image/svg+xml">
<link rel="apple-touch-icon" href="images/apple-touch-icon.png">

<!-- Web Manifest -->
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#9f5524">

<!-- Подключение Remix Icon -->
<link rel="stylesheet" href="/assets/fonts/remixicon/remixicon.css" media="print" onload="this.media='all'">
   
<!-- Локальные шрифты -->
<link rel="stylesheet" href="/fonts/fonts.css" media="print" onload="this.media='all'">

<style>
  .font-pacifico {
    font-family: 'Pacifico', cursive;
    font-display: swap;
  }
</style>

<!-- Schema.org разметка -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebSite",
  "url": "https://altaymed.shop/",
  "name": "Алтайский мёд - Натуральные продукты пчеловодства",
  "description": "Натуральный алтайский мёд от производителя. Доставка по всей России. Гречишный, таёжный, цветочный мёд.",
  "dateModified": "2025-06-27"
}
</script>

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": ["Organization", "LocalBusiness"],
  "name": "Алтайский мёд",
  "url": "https://altaymed.shop/",
  "logo": "https://altaymed.shop/images/favicon.ico",
  "description": "Натуральный алтайский мёд от производителя. Доставка по всей России.",
  "address": {
    "@type": "PostalAddress",
    "addressRegion": "Алтайский край",
    "addressLocality": "Солтонский район",
    "description": "Место сбора мёда"
  },
  "location": {
    "@type": "Place",
    "name": "Офис в Коврове",
    "address": {
      "@type": "PostalAddress",
      "addressRegion": "Владимирская область",
      "addressLocality": "Ковров"
    }
  },
  "telephone": "+79209400222",
  "openingHours": "Пн-Вс 9:00-21:00",
  "image": "https://altaymed.shop/images/og-preview.webp"
}
</script>
</head>
<body>
<!-- Навигация -->
<nav class="bg-white shadow-sm sticky top-0 z-50">
  <div class="container mx-auto px-4 md:px-6 py-3 flex items-center justify-between">
    <a href="#" class="text-2xl md:text-3xl font-pacifico header-logo">Алтайский мёд</a>
    
    <div class="hidden md:flex items-center space-x-6 md:space-x-8">
      <a href="/delivery.html" class="nav-link">Доставка</a> <!-- Заменено Преимущества на Доставка -->
      <a href="#products" class="nav-link">Каталог</a>
      <a href="#about" class="nav-link">О нас</a>
      <a href="https://altaymed.shop/blog" class="nav-link">Блог</a>
      <a href="#footer-contacts" class="nav-link">Контакты</a>
      <a href="#order" class="nav-btn px-4 md:px-6 py-1 md:py-2 !rounded-button hover:bg-opacity-90 transition-all whitespace-nowrap">Заказать</a>
    </div>
    
    <button class="md:hidden w-10 h-10 flex items-center justify-center">
      <i class="ri-menu-line text-2xl text-gray-800" aria-hidden="true"></i>
    </button>
  </div>
  
  <div class="md:hidden hidden bg-white shadow-md px-4 py-3" id="mobile-menu">
    <div class="flex flex-col space-y-4">
      <a href="/delivery.html" class="nav-link py-2">Доставка</a> <!-- Заменено Преимущества на Доставка -->
      <a href="#products" class="nav-link py-2">Каталог</a>
      <a href="#about" class="nav-link py-2">О нас</a>
      <a href="https://altaymed.shop/blog" class="nav-link py-2">Блог</a>
      <a href="#footer-contacts" class="nav-link py-2">Контакты</a>
      <a href="#order" class="nav-btn py-2 text-center !rounded-button hover:bg-opacity-90 transition-all">Заказать</a>
    </div>
  </div>
</nav>

<main>
<!-- Герой-секция -->
<section class="hero-section flex items-center">
  <picture>
    <source media="(max-width: 767px)" srcset="/images/image-1-mobile.webp">
    <source media="(min-width: 768px)" srcset="/images/image-1.webp">
    <img 
      src="/images/image-1.webp" 
      alt="Натуральный мёд с Алтайских гор" 
      class="hero-image" 
      width="1920" 
      height="1080" 
      fetchpriority="high">
  </picture>
  
  <div class="container mx-auto px-4 md:px-6 py-16 md:py-20 w-full critical-content">
    <div class="max-w-2xl text-white">
      <h1 class="text-3xl sm:text-4xl md:text-5xl lg:text-6xl font-pacifico mb-4 md:mb-6">Натуральный мёд с Алтайских гор</h1>
      <p class="text-lg md:text-xl mb-6 md:mb-8 max-w-lg">Наслаждайтесь вкусом и пользой настоящего алтайского мёда, собранного с любовью в экологически чистых районах.</p>
      
      <div class="flex flex-wrap gap-3 md:gap-4 hero-buttons">
        <a href="#order" class="hero-btn-primary px-6 py-2 md:px-8 md:py-3 !rounded-button shadow-lg hover:bg-opacity-90 transition-all whitespace-nowrap text-base md:text-lg font-medium">
          Заказать сейчас
        </a>
        
        <a href="#products" class="hero-btn-secondary bg-white bg-opacity-20 hover:bg-opacity-30 border px-6 py-2 md:px-8 md:py-3 !rounded-button transition-all whitespace-nowrap text-base md:text-lg font-medium">
          Наши продукты
        </a>
      </div>
    </div>
  </div>
</section>

<!-- Преимущества -->
<section id="benefits" class="py-16 md:py-20 texture-bg bg-[#F5DEB3] bg-opacity-20 section-animate">
  <div class="container mx-auto px-4 md:px-6">
    <h2 class="text-3xl md:text-4xl font-pacifico text-center text-secondary mb-12 md:mb-16">Почему выбирают наш мёд</h2>
    
    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 md:gap-10">
      <div class="benefit-card bg-white p-6 md:p-8 rounded-lg shadow-md flex flex-col items-center text-center">
        <div class="benefit-icon w-14 h-14 md:w-16 md:h-16 flex items-center justify-center bg-primary bg-opacity-10 rounded-full mb-4 md:mb-6">
          <i class="ri-plant-line text-primary text-2xl" aria-hidden="true"></i>
        </div>
        <h3 class="text-lg md:text-xl font-bold text-gray-800 mb-3 md:mb-4">Экологически чистый продукт</h3>
        <p class="text-gray-600 text-sm md:text-base">Наши пасеки расположены в заповедных зонах Алтая, вдали от промышленных объектов и дорог.</p>
      </div>
      
      <div class="benefit-card bg-white p-6 md:p-8 rounded-lg shadow-md flex flex-col items-center text-center">
        <div class="benefit-icon w-14 h-14 md:w-16 md:h-16 flex items-center justify-center bg-primary bg-opacity-10 rounded-full mb-4 md:mb-6">
          <i class="ri-leaf-line text-primary text-2xl" aria-hidden="true"></i>
        </div>
        <h3 class="text-lg md:text-xl font-bold text-gray-800 mb-3 md:mb-4">Разнообразие сортов</h3>
        <p class="text-gray-600 text-sm md:text-base">Мы предлагаем широкий ассортимент меда с разнообразными вкусовыми и полезными свойствами.</p>
      </div>
      
      <div class="benefit-card bg-white p-6 md:p-8 rounded-lg shadow-md flex flex-col items-center text-center">
        <div class="benefit-icon w-14 h-14 md:w-16 md:h-16 flex items-center justify-center bg-primary bg-opacity-10 rounded-full mb-4 md:mb-6">
          <i class="ri-award-line text-primary text-2xl" aria-hidden="true"></i>
        </div>
        <h3 class="text-lg md:text-xl font-bold text-gray-800 mb-3 md:mb-4">Проверенное качество</h3>
        <p class="text-gray-600 text-sm md:text-base">Каждая партия меда проходит строгий контроль и проверку на соответствие стандартам.</p>
      </div>
    </div>
    
    <div class="flex justify-center mt-8 md:mt-10">
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6 md:gap-10 max-w-4xl">
        <div class="benefit-card bg-white p-6 md:p-8 rounded-lg shadow-md flex flex-col items-center text-center">
          <div class="benefit-icon w-14 h-14 md:w-16 md:h-16 flex items-center justify-center bg-primary bg-opacity-10 rounded-full mb-4 md:mb-6">
            <i class="ri-truck-line text-primary text-2xl" aria-hidden="true"></i>
          </div>
          <h3 class="text-lg md:text-xl font-bold text-gray-800 mb-3 md:mb-4">Доставка по всей России</h3>
          <p class="text-gray-600 text-sm md:text-base">Мы доставляем наш мёд в любой регион России, сохраняя все полезные свойства продукта.</p>
        </div>
        
        <div class="benefit-card bg-white p-6 md:p-8 rounded-lg shadow-md flex flex-col items-center text-center">
          <div class="benefit-icon w-14 h-14 md:w-16 md:h-16 flex items-center justify-center bg-primary bg-opacity-10 rounded-full mb-4 md:mb-6">
            <i class="ri-heart-line text-primary text-2xl" aria-hidden="true"></i>
          </div>
          <h3 class="text-lg md:text-xl font-bold text-gray-800 mb-3 md:mb-4">Семейные традиции</h3>
          <p class="text-gray-600 text-sm md:text-base">Наша пасека существует уже более 30 лет, и мы бережно храним секреты пчеловодства.</p>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Каталог продукции -->
<section id="products" class="py-16 md:py-20 bg-white section-animate">
  <div class="container mx-auto px-4 md:px-6">
    <h2 class="text-3xl md:text-4xl font-pacifico text-center text-secondary mb-12 md:mb-16">Наши продукты</h2>
    
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 md:gap-8">
      <div id="product-1" class="product-card bg-white rounded-lg shadow-md overflow-hidden">
        <div class="h-56 md:h-64 overflow-hidden">
          <picture>
            <source type="image/webp" srcset="images/image-2-sm.webp 400w, images/image-2.webp 800w" sizes="(max-width: 600px) 400px, 800px">
           <picture>
            <source
             srcset="images/image-2-sm.webp 400w, images/image-2.webp 800w"
              sizes="(max-width: 600px) 400px, 800px"
              type="image/webp"
            >
            <img
              src="images/image-2.webp"
              alt="Разнотравный мёд с Алтая"
              loading="lazy"
              width="800"
              height="600"
              class="w-full h-full object-cover object-top product-image"
              onload="this.classList.add('loaded')"
              decoding="async"
            >
          </picture>
          </picture>
        </div>
        <div class="p-5 md:p-6">
          <h3 class="text-lg md:text-xl font-bold text-gray-800 mb-2">Разнотравье</h3>
          <p class="text-gray-600 text-sm md:text-base mb-3 md:mb-4">Мед с ярким букетом травяных нот, собранных в экологически чистых районах.</p>
          <div class="flex flex-col md:flex-row md:justify-between md:items-center gap-2 md:gap-0">
            <span class="text-lg md:text-xl font-bold text-primary">1100 ₽ / 1 литр</span>
            <button data-product="Разнотравье" data-price="1100" class="buy-btn bg-gradient-to-r from-primary to-[#8ea745] text-white px-4 py-2 md:px-5 md:py-2 !rounded-button hover:opacity-90 transition-opacity whitespace-nowrap text-sm md:text-base">Купить</button>
          </div>
          <script type="application/ld+json">
          {
            "@context": "https://schema.org/",
            "@type": "Product",
            "name": "Разнотравье",
            "description": "Мед с ярким букетом травяных нот, собранных в экологически чистых районах Алтая",
            "offers": {
              "@type": "Offer",
              "price": "1100",
              "priceCurrency": "RUB"
            }
          }
          </script>
        </div>
      </div>
      
      <div id="product-2" class="product-card bg-white rounded-lg shadow-md overflow-hidden">
        <div class="h-56 md:h-64 overflow-hidden">
          <picture>
            <source type="image/webp" srcset="images/image-3-sm.webp 400w, images/image-3.webp 800w" sizes="(max-width: 600px) 400px, 800px">
            <img 
              src="images/image-3.webp" 
              alt="Таёжный мёд из Алтайского края" 
              loading="lazy"
              width="800"
              height="600"
              class="w-full h-full object-cover object-top product-image"
              onload="this.classList.add('loaded')"
              decoding="async">
          </picture>
        </div>
        <div class="p-5 md:p-6">
          <h3 class="text-lg md:text-xl font-bold text-gray-800 mb-2">Таёжный мёд</h3>
          <p class="text-gray-600 text-sm md:text-base mb-3 md:mb-4">Редкий и насыщенный мёд из дикой тайги, обладающий уникальными целебными свойствами.</p>
          <div class="flex flex-col md:flex-row md:justify-between md:items-center gap-2 md:gap-0">
            <span class="text-lg md:text-xl font-bold text-primary">1300 ₽ / 1 литр</span>
            <button data-product="Таёжный мёд" data-price="1300" class="buy-btn bg-gradient-to-r from-primary to-[#8ea745] text-white px-4 py-2 md:px-5 md:py-2 !rounded-button hover:opacity-90 transition-opacity whitespace-nowrap text-sm md:text-base">Купить</button>
          </div>
          <script type="application/ld+json">
          {
            "@context": "https://schema.org/",
            "@type": "Product",
            "name": "Таёжный мёд",
            "description": "Редкий и насыщенный мёд из дикой тайги, обладающий уникальными целебными свойствами",
            "offers": {
              "@type": "Offer",
              "price": "1300",
              "priceCurrency": "RUB"
            }
          }
          </script>
        </div>
      </div>
      
      <div id="product-3" class="product-card bg-white rounded-lg shadow-md overflow-hidden">
        <div class="h-56 md:h-64 overflow-hidden">
          <picture>
            <source type="image/webp" srcset="images/image-4-sm.webp 400w, images/image-4.webp 800w" sizes="(max-width: 600px) 400px, 800px">
            <img 
              src="images/image-4.webp" 
              alt="Гречишный мёд от производителя" 
              loading="lazy"
              width="800"
              height="600"
              class="w-full h-full object-cover object-top product-image"
              onload="this.classList.add('loaded')"
              decoding="async">
          </picture>
        </div>
        <div class="p-5 md:p-6">
          <h3 class="text-lg md:text-xl font-bold text-gray-800 mb-2">Гречишный мёд</h3>
          <p class="text-gray-600 text-sm md:text-base mb-3 md:mb-4">Насыщенный тёмный мёд с богатым вкусом и ароматом гречихи.</p>
          <div class="flex flex-col md:flex-row md:justify-between md:items-center gap-2 md:gap-0">
            <span class="text-lg md:text-xl font-bold text-primary">1000 ₽ / 1 литр</span>
            <button data-product="Гречишный мёд" data-price="1000" class="buy-btn bg-gradient-to-r from-primary to-[#8ea745] text-white px-4 py-2 md:px-5 md:py-2 !rounded-button hover:opacity-90 transition-opacity whitespace-nowrap text-sm md:text-base">Купить</button>
          </div>
          <script type="application/ld+json">
          {
            "@context": "https://schema.org/",
            "@type": "Product",
            "name": "Гречишный мёд",
            "description": "Насыщенный тёмный мёд с богатым вкусом и ароматом гречихи",
            "offers": {
              "@type": "Offer",
              "price": "1000",
              "priceCurrency": "RUB"
            }
          }
          </script>
        </div>
      </div>
    </div>
    
    <div class="text-center mt-10 md:mt-12">
      <a href="#order" class="hero-btn-primary inline-block px-6 py-2 md:px-8 md:py-3 !rounded-button shadow-lg hover:bg-opacity-90 transition-all whitespace-nowrap text-base md:text-lg font-medium">
        Посмотреть все продукты
      </a>
    </div>
  </div>
</section>

<!-- О нас -->
<section id="about" class="py-16 md:py-20 bg-[#F5DEB3] bg-opacity-20 texture-bg relative section-animate">
  <div class="container mx-auto px-4 md:px-6 relative z-10">
    <h2 class="text-3xl md:text-4xl font-pacifico text-center text-secondary mb-12 md:mb-16">О нашей пасеке</h2>
    
    <div class="grid grid-cols-1 md:grid-cols-2 gap-8 md:gap-12 items-center">
      <div class="order-2 md:order-1">
        <div class="about-image bg-white p-3 shadow-lg rotate-2 mb-6 md:mb-8 max-w-md mx-auto">
          <picture>
            <source type="image/webp" srcset="images/image-5-sm.webp 400w, images/image-5.webp 800w" sizes="(max-width: 600px) 400px, 800px">
            <img 
              src="images/image-5.webp" 
              alt="Семейная пасека на Алтае" 
              loading="lazy"
              width="800"
              height="533"
              class="w-full h-auto product-image"
              onload="this.classList.add('loaded')"
              decoding="async">
          </picture>
        </div>
        <div class="about-image bg-white p-3 shadow-lg -rotate-3 max-w-md mx-auto">
          <picture>
            <source type="image/webp" srcset="images/image-6-sm.webp 400w, images/image-6.webp 800w" sizes="(max-width: 600px) 400px, 800px">
            <img 
              src="images/image-6.webp" 
              alt="Экологически чистый мёд с Алтая" 
              loading="lazy"
              width="800"
              height="533"
              class="w-full h-auto product-image"
              onload="this.classList.add('loaded')"
              decoding="async">
          </picture>
        </div>
      </div>
      
      <div class="text-gray-700 order-1 md:order-2">
        <h3 class="text-xl md:text-2xl font-bold text-secondary mb-4 md:mb-6">Семейное дело с 1992 года</h3>
        <p class="mb-4 text-sm md:text-base">Мы находимся в самом сердце Алтая, в Солтонском районе — месте, где природа живет и дышит в гармонии. Наши ульи расположены в окружении чистых лесов и полей, а мед наполняется особым ароматом и богатым вкусом благодаря натуральным источникам. Пчелы питаются только природными ресурсами, ведь для нас важно сохранять чистоту и здоровье природы.</p>
        
        <div class="about-check-item">
          <div class="about-check-icon">
            <i class="ri-check-line text-primary" aria-hidden="true"></i>
          </div>
          <p class="about-check-text">Более 300 пчелиных семей</p>
        </div>
        
        <div class="about-check-item">
          <div class="about-check-icon">
            <i class="ri-check-line text-primary" aria-hidden="true"></i>
          </div>
          <p class="about-check-text">Ежегодно производим более 5 тонн мёда</p>
        </div>
        
        <div class="about-check-item">
          <div class="about-check-icon">
            <i class="ri-check-line text-primary" aria-hidden="true"></i>
          </div>
          <p class="about-check-text">Работаем по экологическим стандартам, заботимся о пчелах и природе</p>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Форма заказа -->
<section id="order" class="py-16 md:py-20 bg-white section-animate">
  <div class="container mx-auto px-4 md:px-6">
    <div class="max-w-4xl mx-auto bg-gradient-to-br from-primary to-[#8ea745] rounded-lg shadow-xl overflow-hidden">
      <div class="grid grid-cols-1 md:grid-cols-2">
        <div class="p-6 md:p-10 text-white">
          <h2 class="text-2xl md:text-3xl font-pacifico mb-4 md:mb-6">Заказать мёд</h2>
          <p class="mb-6 md:mb-8 text-sm md:text-base">Заполните форму, и мы свяжемся с вами для уточнения деталей заказа и доставки.</p>
          
          <div class="mb-4 md:mb-6">
            <div class="flex items-center space-x-3 mb-2">
              <div class="w-7 h-7 md:w-8 md:h-8 flex items-center justify-center bg-white bg-opacity-20 rounded-full">
                <i class="ri-truck-line text-white" aria-hidden="true"></i>
              </div>
              <span class="font-medium text-sm md:text-base">Доставка по всей России</span>
            </div>
            
            <div class="flex items-center space-x-3 mb-2">
              <div class="w-7 h-7 md:w-8 md:h-8 flex items-center justify-center bg-white bg-opacity-20 rounded-full">
                <i class="ri-shield-check-line text-white" aria-hidden="true"></i>
              </div>
              <span class="font-medium text-sm md:text-base">Безопасная оплата</span>
            </div>
            
            <div class="flex items-center space-x-3">
              <div class="w-7 h-7 md:w-8 md:h-8 flex items-center justify-center bg-white bg-opacity-20 rounded-full">
                <i class="ri-medal-line text-white" aria-hidden="true"></i>
              </div>
              <span class="font-medium text-sm md:text-base">Гарантия качества</span>
            </div>
          </div>
        </div>
        
        <div class="bg-white p-6 md:p-8 lg:p-10">
          <form id="order-form">
            <!-- CSRF Token -->
            <input type="hidden" name="csrf_token" id="csrf_token" value="">
            
            <!-- Honeypot для ботов -->
            <div style="position: absolute; left: -5000px;" aria-hidden="true">
              <input type="text" name="bot_check" tabindex="-1" autocomplete="off">
            </div>
            
            <div class="mb-3 md:mb-4">
              <label for="name" class="block text-gray-700 mb-1 md:mb-2 text-sm md:text-base">Ваше имя</label>
              <input type="text" id="name" class="w-full px-3 py-2 md:px-4 md:py-3 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-primary text-sm md:text-base" placeholder="Иван Петров" maxlength="100">
              <div class="error-message" id="name-error"></div>
            </div>
            
            <div class="mb-3 md:mb-4">
              <label for="phone" class="block text-gray-700 mb-1 md:mb-2 text-sm md:text-base">Телефон</label>
              <input type="tel" id="phone" class="w-full px-3 py-2 md:px-4 md:py-3 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-primary text-sm md:text-base" placeholder="+7 (999) 123-45-67" maxlength="18">
              <div class="error-message" id="phone-error"></div>
            </div>
            
            <div class="mb-3 md:mb-4">
              <label for="email" class="block text-gray-700 mb-1 md:mb-2 text-sm md:text-base">Email</label>
              <input type="email" id="email" class="w-full px-3 py-2 md:px-4 md:py-3 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-primary text-sm md:text-base" placeholder="example@mail.ru" maxlength="100">
              <div class="error-message" id="email-error"></div>
            </div>
            
            <div class="mb-4 md:mb-6">
              <label for="message" class="block text-gray-700 mb-1 md:mb-2 text-sm md:text-base">Комментарий к заказу</label>
              <textarea id="message" rows="3" class="w-full px-3 py-2 md:px-4 md:py-3 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-primary text-sm md:text-base" placeholder="Укажите интересующие вас сорта мёда и объём" maxlength="500"></textarea>
              <div class="error-message" id="message-error"></div>
            </div>
            
            <button type="submit" class="w-full bg-orange text-white py-2 md:py-3 !rounded-button hover:bg-opacity-90 transition-all font-medium text-sm md:text-base">Отправить заявку</button>
          </form>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Как мы работаем -->
<section id="workflow" class="py-16 md:py-20 bg-[#F5DEB3] bg-opacity-20 texture-bg section-animate">
  <div class="container mx-auto px-4 md:px-6">
    <h2 class="text-3xl md:text-4xl font-pacifico text-center text-secondary mb-16 md:mb-20">Как мы работаем</h2>
    
    <div class="workflow-container">
      <div class="workflow-steps">
        <div class="step-circle">
          <div class="step-number">1</div>
          <div class="step-icon">
            <i class="ri-chat-1-line text-2xl text-[#8B4513]" aria-hidden="true"></i>
          </div>
          <div class="step-content">
            <h3 class="step-title">Вы оставляете заявку</h3>
          </div>
        </div>
        
        <div class="step-circle">
          <div class="step-number">2</div>
          <div class="step-icon">
            <i class="ri-phone-line text-2xl text-[#8B4513]" aria-hidden="true"></i>
          </div>
          <div class="step-content">
            <h3 class="step-title">Мы связываемся с вами</h3>
          </div>
        </div>
        
        <div class="step-circle">
          <div class="step-number">3</div>
          <div class="step-icon">
            <i class="ri-truck-line text-2xl text-[#8B4513]" aria-hidden="true"></i>
          </div>
          <div class="step-content">
            <h3 class="step-title">Отправляем вам мед</h3>
          </div>
        </div>
        
        <div class="step-circle">
          <div class="step-number">4</div>
          <div class="step-icon">
            <i class="ri-gift-line text-2xl text-[#8B4513]" aria-hidden="true"></i>
          </div>
          <div class="step-content">
            <h3 class="step-title">Вы наслаждаетесь вкусом</h3>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
</main>

<!-- Футер -->
<footer class="py-10 md:py-12 w-full">
  <div id="footer-contacts" class="container mx-auto px-4 md:px-6 w-full">
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6 md:gap-8 w-full">
      <div class="footer-column">
        <div class="logo-wrapper">
          <a href="/" class="text-2xl md:text-3xl font-['Pacifico'] mb-3 md:mb-4 block">Алтайский мёд</a>
        </div>
        <div class="description-wrapper">
          <p class="text-xs">Натуральные продукты пчеловодства с Алтайских гор.</p>
          <p class="text-xs">Сайт защищён — работает по протоколу HTTPS</p>
          <p class="text-xs">© 2025 Алтайский мёд. Все права защищены.</p>
        </div>
        
        <!-- Иконки соцсетей -->
        <div class="footer-social-icons">
          <a href="https://vk.com/honeybuckwheat" target="_blank" class="social-icon-bw" aria-label="Наша страница ВКонтакте">
            <i class="ri-vk-line text-xl" aria-hidden="true"></i>
          </a>
          <a href="https://t.me/HONEYBUCKWHEAT" target="_blank" class="social-icon-bw" aria-label="Наш Telegram канал">
            <i class="ri-telegram-line text-xl" aria-hidden="true"></i>
          </a>
          <a href="https://www.avito.ru/kovrov/produkty_pitaniya/med_grechishnyy_s_altayskogo_kraya_kupit_v_kovrove_4293409000?utm_campaign=native&utm_medium=item_page_ios&utm_source=soc_sharing" 
             target="_blank" class="social-icon-bw" aria-label="Наше объявление на Авито">
            <div class="icon-inner">
              <svg viewBox="0 0 192 192" xmlns="http://www.w3.org/2000/svg" class="avito-icon-bw">
                <path fill="#04e061" d="M61.924 172.07c26.468 0 47.924-21.456 47.924-47.924S88.392 76.222 61.924 76.222 14 97.678 14 124.146s21.456 47.925 47.924 47.925z" transform="translate(7.024 7.024) scale(.92683)"/>
                <path fill="#ff4053" d="M149.044 166.007c15.992 0 28.956-12.963 28.956-28.955 0-15.992-12.964-28.955-28.956-28.955-15.99 0-28.954 12.963-28.954 28.955 0 15.992 12.963 28.955 28.954 28.955z" transform="translate(7.024 7.024) scale(.92683)"/>
                <path fill="#965eeb" d="M71.086 65.979c9.898 0 17.922-8.024 17.922-17.921 0-9.898-8.024-17.922-17.922-17.922-9.898 0-17.921 8.024-17.921 17.922 0 9.897 8.023 17.921 17.921 17.921z" transform="translate(7.024 7.024) scale(.92683)"/>
                <path fill="#0af" d="M137.789 97.856c21.519 0 38.964-17.444 38.964-38.963 0-21.52-17.445-38.964-38.964-38.964-21.52 0-38.964 17.445-38.964 38.964s17.445 38.963 38.964 38.963z" transform="translate(7.024 7.024) scale(.92683)"/>
              </svg>
            </div>
          </a>
          <a href="https://yandex.ru/maps/" target="_blank" class="social-icon-bw" aria-label="Наше местоположение на Яндекс Картах">
            <div class="icon-inner">
              <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M12 2C8.13 2 5 5.13 5 9C5 13.17 9.42 18.92 11.24 21.11C11.64 21.59 12.37 21.59 12.77 21.11C14.58 18.92 19 13.17 19 9C19 5.13 15.87 2 12 2ZM12 11.5C10.62 11.5 9.5 10.38 9.5 9C9.5 7.62 10.62 6.5 12 6.5C13.38 6.5 14.5 7.62 14.5 9C14.5 10.38 13.38 11.5 12 11.5Z" 
                      fill="currentColor"/>
              </svg>
            </div>
          </a>
          <a href="https://dzen.ru/altaymed" target="_blank" class="social-icon-bw" aria-label="Наш канал в Яндекс Дзен">
            <div class="icon-inner">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet">
                <g transform="translate(0.000000,512.000000) scale(0.100000,-0.100000)" fill="currentColor" stroke="none">
                  <path d="M2310 5113 c-833 -85 -1562 -559 -1979 -1286 -189 -328 -309 -731 -328 -1094 l-6 -123 34 0 c121 1 626 22 734 30 509 42 835 129 1075 288 395 261 571 645 635 1379 12 134 35 651 35 786 l0 27 -82 -2 c-46 0 -99 -3 -118 -5z"/>
                  <path d="M2660 5069 c0 -117 21 -601 30 -719 52 -637 183 -1005 451 -1271 298 -295 743 -425 1549 -454 85 -3 218 -8 294 -11 l139 -6 -6 124 c-36 681 -384 1362 -922 1803 -417 341 -921 546 -1432 581 l-103 7 0 -54z"/>
                  <path d="M4 2361 c57 -835 546 -1604 1289 -2030 329 -189 731 -309 1095 -328 l124 -6 -6 139 c-3 76 -8 211 -11 299 -21 579 -94 959 -241 1245 -68 132 -128 212 -243 323 -183 176 -395 282 -701 351 -267 59 -548 85 -1094 102 l-219 6 7 -101z"/>
                  <path d="M4756 2449 c-875 -32 -1305 -153 -1610 -456 -180 -178 -289 -376 -361 -658 -72 -281 -101 -558 -120 -1149 l-7 -189 102 7 c833 57 1603 546 2029 1289 183 318 302 707 327 1065 l7 102 -79 -2 c-43 0 -173 -5 -288 -9z"/>
                </g>
              </svg>
            </div>
          </a>
        </div>
      </div>
      
      <div class="footer-column">
        <h4>Каталог</h4>
        <ul>
          <li>
            <a href="/#product-1" class="hover:text-gray-300 transition-colors flex items-center footer-link-item">
              <span class="bullet mr-2"></span>
              <span class="text-sm md:text-base">Разнотравье</span>
            </a>
          </li>
          <li>
            <a href="/#product-2" class="hover:text-gray-300 transition-colors flex items-center footer-link-item">
              <span class="bullet mr-2"></span>
              <span class="text-sm md:text-base">Таёжный мёд</span>
            </a>
          </li>
          <li>
            <a href="/#product-3" class="hover:text-gray-300 transition-colors flex items-center footer-link-item">
              <span class="bullet mr-2"></span>
              <span class="text-sm md:text-base">Гречишный мёд</span>
            </a>
          </li>
        </ul>
      </div>
      
      <div class="footer-column">
        <h4>Материалы</h4>
        <ul>
          <li>
            <a href="/blog/" class="hover:text-gray-300 transition-colors flex items-center footer-link-item">
              <span class="bullet mr-2"></span>
              <span class="text-sm md:text-base">Блог</span>
            </a>
          </li>
          <li>
            <a href="/faq/" class="hover:text-gray-300 transition-colors flex items-center footer-link-item">
              <span class="bullet mr-2"></span>
              <span class="text-sm md:text-base">FAQ</span>
            </a>
          </li>
          <li>
            <a href="/legal.html" class="hover:text-gray-300 transition-colors flex items-center footer-link-item">
              <span class="bullet mr=2"></span>
              <span class="text-sm md:text-base">Правовая информация</span>
            </a>
          </li>
          <li>
            <a href="/wholesale.html" class="hover:text-gray-300 transition-colors flex items-center footer-link-item">
              <span class="bullet mr=2"></span>
              <span class="text-sm md:text-base">Мёд оптом для кафе, магазинов и заведений</span>
            </a>
          </li>
        </ul>
      </div>
      
      <div class="footer-column">
        <h4>Информация</h4>
        <ul>
          <li>
            <a href="/#benefits" class="hover:text-gray-300 transition-colors flex items-center footer-link-item">
              <span class="bullet mr-2"></span>
              <span class="text-sm md:text-base">Преимущества</span>
            </a>
          </li>
          <li>
            <a href="/#about" class="hover:text-gray-300 transition-colors flex items-center footer-link-item">
              <span class="bullet mr-2"></span>
              <span class="text-sm md:text-base">О нас</span>
            </a>
          </li>
          <li>
            <a href="#footer-contacts" class="hover:text-gray-300 transition-colors flex items-center footer-link-item">
              <span class="bullet mr-2"></span>
              <span class="text-sm md:text-base">Контакты</span>
            </a>
          </li>
          <li>
            <a href="/delivery.html" class="hover:text-gray-300 transition-colors flex items-center footer-link-item">
              <span class="bullet mr-2"></span>
              <span class="text-sm md:text-base">Доставка и оплата</span>
            </a>
          </li>
        </ul>
      </div>
      
      <div class="footer-column">
        <h4>Контакты</h4>
        <ul>
          <li>
            <a class="footer-link-item">
              <div class="contact-icon">
                <i class="ri-map-pin-2-line ri-sm md:ri-base" aria-hidden="true"></i>
              </div>
              <span class="contact-text">Владимирская обл. Город Ковров</span>
            </a>
          </li>
          <li>
            <a href="tel:+79209400222" class="footer-link-item">
              <div class="contact-icon">
                <i class="ri-phone-line ri-sm md:ri-base" aria-hidden="true"></i>
              </div>
              <span class="contact-text">+7 (920) 940-02-22</span>
            </a>
          </li>
          <li>
            <a href="mailto:altaymed.shop@yandex.ru" class="footer-link-item">
              <div class="contact-icon">
                <i class="ri-mail-line ri-sm md:ri-base" aria-hidden="true"></i>
              </div>
              <span class="contact-text">altaymed.shop@yandex.ru</span>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>
</footer>

<!-- Модальные окна -->
<div id="buy-modal" class="modal">
  <div class="modal-content">
    <div class="bg-gradient-to-r from-primary to-[#8ea745] p-4 md:p-6 rounded-t-lg">
      <div class="flex justify-between items-center">
        <h3 class="text-xl md:text-2xl font-bold text-white w-full text-center">Оформление заказа</h3>
        <span class="close-modal text-white"><i class="ri-close-line text-2xl" aria-hidden="true"></i></span>
      </div>
    </div>
    <div class="p-4 md:p-6">
      <form id="quick-order-form">
        <!-- CSRF Token -->
        <input type="hidden" name="csrf_token" id="quick-csrf_token" value="">
        
        <!-- Honeypot для ботов -->
        <div style="position: absolute; left: -5000px;" aria-hidden="true">
          <input type="text" name="bot_check" tabindex="-1" autocomplete="off">
        </div>
        
        <div class="mb-3 md:mb-4">
          <label for="quick-product" class="block text-gray-700 mb-1 md:mb-2 text-sm md:text-base">Товар</label>
          <input type="text" id="quick-product" class="w-full px-3 py-2 md:px-4 md:py-3 border border-gray-300 rounded bg-gray-50 cursor-not-allowed text-sm md:text-base" readonly>
        </div>
        
        <div class="mb-3 md:mb-4">
          <label for="quantity" class="block text-gray-700 mb-1 md:mb-2 text-sm md:text-base">Количество (литров)</label>
          <input type="number" id="quantity" min="1" value="1" class="w-full px-3 py-2 md:px-4 md:py-3 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-primary text-sm md:text-base">
          <div class="error-message" id="quantity-error"></div>
        </div>
        
        <div class="mb-3 md:mb-4">
          <label class="block text-gray-700 mb-1 md:mb-2 text-sm md:text-base">Примерная стоимость</label>
          <div class="bg-gray-100 px-3 py-2 md:px-4 md:py-3 rounded flex justify-between items-center">
            <span id="price-per-liter" class="text-gray-600 text-sm md:text-base">Цена за литр: <span class="font-semibold">1100</span> ₽</span>
            <span id="total-price" class="text-lg md:text-xl font-bold text-primary">1100 ₽</span>
          </div>
        </div>
        
        <div class="mb-3 md:mb-4">
          <label for="delivery-address" class="block text-gray-700 mb-1 md:mb-2 text-sm md:text-base">Адрес доставки</label>
          <textarea id="delivery-address" rows="2" class="w-full px-3 py-2 md:px-4 md:py-3 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-primary text-sm md:text-base" placeholder="Укажите полный адрес доставки" maxlength="200"></textarea>
          <div class="error-message" id="address-error"></div>
        </div>
        
        <div class="mb-3 md:mb-4">
          <label for="quick-phone" class="block text-gray-700 mb-1 md:mb-2 text-sm md:text-base">Контактный телефон</label>
          <input type="tel" id="quick-phone" class="w-full px-3 py-2 md:px-4 md:py-3 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-primary text-sm md:text-base" placeholder="+7 (999) 123-45-67" maxlength="18">
          <div class="error-message" id="quick-phone-error"></div>
        </div>
        
        <button type="submit" class="w-full bg-orange text-white py-2 md:py-3 !rounded-button hover:bg-opacity-90 transition-all font-medium text-sm md:text-base">
          Подтвердить заказ
        </button>
      </form>
    </div>
  </div>
</div>

<div id="success-modal" class="modal">
  <div class="success-modal-content">
    <div class="success-icon">
      <i class="ri-checkbox-circle-line text-4xl text-white" aria-hidden="true"></i>
    </div>
    <h3 class="success-title">Заказ оформлен!</h3>
    <p class="success-text">Спасибо за ваш заказ! Мы свяжемся с вами в течение 10 минут для подтверждения деталей.</p>
    <button class="success-btn" id="close-success-modal">Отлично</button>
  </div>
</div>

<div id="error-modal" class="modal">
  <div class="modal-content">
    <div class="bg-red-600 p-4 md:p-6 rounded-t-lg">
      <div class="flex justify-between items-center">
        <h3 class="text-xl md:text-2xl font-bold text-white w-full text-center">Ошибка</h3>
        <span class="close-error-modal text-white"><i class="ri-close-line text-2xl" aria-hidden="true"></i></span>
      </div>
    </div>
    <div class="p-4 md:p-6 text-center">
      <div class="error-icon mb-4">
        <i class="ri-error-warning-line text-4xl text-red-600" aria-hidden="true"></i>
      </div>
      <p class="error-text mb-6">Произошла ошибка при отправке заказа. Пожалуйста, попробуйте еще раз или позвоните нам по телефону:</p>
      <a href="tel:+79209400222" class="text-lg md:text-xl font-bold text-primary">+7 (920) 940-02-22</a>
    </div>
  </div>
</div>

<script>
// ================== СИСТЕМА БЕЗОПАСНОСТИ ================== //
// Генерация CSRF токена
function generateCSRFToken() {
  return Math.random().toString(36).substring(2, 15) + Math.random().toString(36).substring(2, 15);
}

// Улучшенная функция санитизации
function sanitize(input) {
  if (typeof input !== 'string') return '';
  return input
    .replace(/</g, '&lt;')
    .replace(/>/g, '&gt;')
    .replace(/"/g, '&quot;')
    .replace(/'/g, '&#x27;')
    .replace(/\//g, '&#x2F;')
    .substring(0, 200); // Ограничение длины
}

// Проверка валидности телефона с поддержкой нескольких форматов
function isValidPhone(phone) {
  // Удаляем все нецифровые символы, кроме плюса
  const cleaned = phone.replace(/[^\d+]/g, '');
  
  // Проверяем различные форматы
  return (
    /^\+7\d{10}$/.test(cleaned) ||     // +7XXXXXXXXXX
    /^\+8\d{10}$/.test(cleaned) ||      // +8XXXXXXXXXX
    /^7\d{10}$/.test(cleaned) ||        // 7XXXXXXXXXX
    /^8\d{10}$/.test(cleaned)           // 8XXXXXXXXXX
  );
}

// Проверка частоты отправки форм
function checkRateLimit() {
  const now = Date.now();
  const submissions = JSON.parse(localStorage.getItem('form_submissions') || '[]');
  
  // Удаляем записи старше 1 минуты
  const recentSubmissions = submissions.filter(time => now - time < 60000);
  
  if (recentSubmissions.length >= 3) {
    return false;
  }
  
  recentSubmissions.push(now);
  localStorage.setItem('form_submissions', JSON.stringify(recentSubmissions));
  return true;
}

// Проверка honeypot поля
function checkHoneypot(form) {
  const honeypot = form.querySelector('input[name="bot_check"]');
  return honeypot && honeypot.value !== '';
}

// ================== ОСНОВНОЙ КОД ================== //
// Унифицированное управление модальными окнами
function toggleModal(modalId, show) {
  const modal = document.getElementById(modalId);
  if (modal) {
    modal.style.display = show ? 'flex' : 'none';
    document.body.style.overflow = show ? 'hidden' : 'auto';
  }
}

// Оптимизированная загрузка аналитики
function loadAnalytics() {
  // Yandex Metrika
  var yaScript = document.createElement('script');
  yaScript.src = 'https://mc.yandex.ru/metrika/tag.js';
  yaScript.async = true;
  document.head.appendChild(yaScript);

  yaScript.onload = function() {
    ym(102951378, "init", {
      clickmap:true,
      trackLinks:true,
      accurateTrackBounce:true
    });
  };
}

// Загружаем аналитику после полной загрузки страницы с задержкой 1 сек
window.addEventListener('load', function() {
  setTimeout(loadAnalytics, 1000);
});

// Функция для создания маски телефона
function createPhoneMask(input) {
  input.addEventListener('input', function(e) {
    let value = input.value.replace(/\D/g, '');
    let formattedValue = '';
    
    // Автоматически добавляем +7 ( при начале ввода
    if (value.length === 0) {
      input.value = '';
      return;
    }
    
    if (value.startsWith('7') || value.startsWith('8')) {
      value = value.replace(/^[78]/, '7');
    }
    
    if (!value.startsWith('7') && !value.startsWith('+')) {
      value = '7' + value;
    }
    
    // Форматируем номер
    formattedValue = '+7 (';
    
    if (value.length > 1) {
      formattedValue += value.substring(1, 4);
    }
    
    if (value.length >= 5) {
      formattedValue += ') ' + value.substring(4, 7);
    }
    
    if (value.length >= 8) {
      formattedValue += '-' + value.substring(7, 9);
    }
    
    if (value.length >= 10) {
      formattedValue += '-' + value.substring(9, 11);
    }
    
    input.value = formattedValue;
  });
}

// Показать сообщение об ошибке
function showError(elementId, message) {
  const errorElement = document.getElementById(elementId);
  if (errorElement) {
    errorElement.textContent = message;
    errorElement.classList.add('error-visible');
    
    // Добавляем класс ошибки к полю ввода
    const inputElement = errorElement.previousElementSibling;
    if (inputElement) {
      inputElement.classList.add('input-error');
    }
  }
}

// Скрыть сообщение об ошибке
function hideError(elementId) {
  const errorElement = document.getElementById(elementId);
  if (errorElement) {
    errorElement.textContent = '';
    errorElement.classList.remove('error-visible');
    
    // Убираем класс ошибки с поля ввода
    const inputElement = errorElement.previousElementSibling;
    if (inputElement) {
      inputElement.classList.remove('input-error');
    }
  }
}

document.addEventListener('DOMContentLoaded', function() {
  // Инициализация CSRF токенов
  const csrfToken = generateCSRFToken();
  document.getElementById('csrf_token').value = csrfToken;
  document.getElementById('quick-csrf_token').value = csrfToken;
  localStorage.setItem('csrf_token', csrfToken);
  
  // Инициализация масок телефона
  const phoneInput = document.getElementById('phone');
  const quickPhoneInput = document.getElementById('quick-phone');
  
  if (phoneInput) createPhoneMask(phoneInput);
  if (quickPhoneInput) createPhoneMask(quickPhoneInput);

  const mobileMenuButton = document.querySelector('.md\\:hidden');
  const mobileMenu = document.getElementById('mobile-menu');
  
  mobileMenuButton.addEventListener('click', function() {
    if (mobileMenu.classList.contains('hidden')) {
      mobileMenu.classList.remove('hidden');
      mobileMenu.classList.add('block');
    } else {
      mobileMenu.classList.add('hidden');
      mobileMenu.classList.remove('block');
    }
  });
  
  // Плавная прокрутка к якорям
  document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function(e) {
      if (this.getAttribute('href') === '#') return;
      
      e.preventDefault();
      const targetId = this.getAttribute('href');
      const targetElement = document.querySelector(targetId);
      
      if (targetElement) {
        window.scrollTo({
          top: targetElement.offsetTop - 80,
          behavior: 'smooth'
        });
        
        // Закрыть мобильное меню при клике на ссылку
        if (!mobileMenu.classList.contains('hidden') && window.innerWidth < 768) {
          mobileMenu.classList.add('hidden');
          mobileMenu.classList.remove('block');
        }
      }
    });
  });
  
  // Получаем формы
  const orderForm = document.querySelector('#order form');
  const quickOrderForm = document.querySelector('#quick-order-form');

  // Функция для отправки сообщения в Telegram
  function sendToTelegram(message) {
    const botToken = '8078729850:AAFrAZpEXRDYIQ6WuTIEsV0VK4rQx9tIPJ4';
    const chatId = '5192881217';
    const url = `https://api.telegram.org/bot${botToken}/sendMessage`;
    
    const params = new URLSearchParams({
      chat_id: chatId,
      text: message,
      parse_mode: 'HTML'
    });

    const xhr = new XMLHttpRequest();
    xhr.open('POST', url, true);
    xhr.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');
    
    return new Promise((resolve) => {
      xhr.onload = function() {
        if (xhr.status === 200) {
          const response = JSON.parse(xhr.responseText);
          resolve(response.ok);
        } else {
          console.error('Ошибка отправки:', xhr.statusText);
          toggleModal('error-modal', true);
          resolve(false);
        }
      };
      
      xhr.onerror = function() {
        console.error('Ошибка сети');
        toggleModal('error-modal', true);
        resolve(false);
      };
      
      xhr.send(params.toString());
    });
  }

  // Обработчик формы заказа с защитой
  if (orderForm) {
    orderForm.addEventListener('submit', async function(e) {
      e.preventDefault();
      
      // Скрываем все предыдущие ошибки
      hideError('name-error');
      hideError('phone-error');
      hideError('email-error');
      hideError('message-error');
      
      // Проверка honeypot
      if (checkHoneypot(this)) {
        console.log('Bot detected via honeypot');
        return;
      }
      
      // Проверка частоты запросов
      if (!checkRateLimit()) {
        showError('phone-error', 'Слишком много запросов. Пожалуйста, попробуйте через минуту.');
        return;
      }
      
      // Проверка CSRF токена
      const storedToken = localStorage.getItem('csrf_token');
      const formToken = document.getElementById('csrf_token').value;
      if (storedToken !== formToken) {
        console.error('CSRF token mismatch');
        toggleModal('error-modal', true);
        return;
      }
      
      const name = sanitize(document.getElementById('name').value);
      const phone = sanitize(document.getElementById('phone').value);
      const email = sanitize(document.getElementById('email').value);
      const message = sanitize(document.getElementById('message').value);
      
      // Валидация полей
      let hasError = false;
      
      if (!name || name.length < 2) {
        showError('name-error', 'Пожалуйста, введите корректное имя');
        hasError = true;
      }
      
      if (!isValidPhone(phone)) {
        showError('phone-error', 'Пожалуйста, введите корректный номер телефона');
        hasError = true;
      }
      
      if (email && !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
        showError('email-error', 'Пожалуйста, введите корректный email');
        hasError = true;
      }
      
      if (hasError) return;
      
      // Форматируем сообщение для Telegram
      const telegramMessage = `
<b>🔥 НОВЫЙ ЗАКАЗ С САЙТА 🔥</b>
<b>Имя:</b> ${name}
<b>Телефон:</b> ${phone}
<b>Email:</b> ${email || 'не указан'}
<b>Комментарий:</b> ${message || 'нет комментария'}
      `;
      
      try {
        const success = await sendToTelegram(telegramMessage);
        
        if (success) {
          // Показываем модальное окно успеха
          toggleModal('success-modal', true);
          orderForm.reset();
        } else {
          toggleModal('error-modal', true);
        }
      } catch (error) {
        console.error('Ошибка:', error);
        toggleModal('error-modal', true);
      }
    });
  }
  
  // Обработка покупки товара
  const buyButtons = document.querySelectorAll('.buy-btn');
  const modal = document.getElementById('buy-modal');
  const closeModal = document.querySelector('.close-modal');
  const closeErrorModal = document.querySelector('.close-error-modal');
  const pricePerLiter = document.getElementById('price-per-liter');
  const totalPrice = document.getElementById('total-price');
  const quantityInput = document.getElementById('quantity');
  let currentPrice = 0;
  
  // Функция для обновления стоимости
  function updateTotalPrice() {
    const quantity = parseInt(quantityInput.value) || 1;
    const total = currentPrice * quantity;
    totalPrice.textContent = total.toLocaleString('ru-RU') + ' ₽';
    pricePerLiter.querySelector('span').textContent = currentPrice.toLocaleString('ru-RU');
  }
  
  // Открытие модального окна
  buyButtons.forEach(button => {
    button.addEventListener('click', function() {
      const product = this.getAttribute('data-product');
      const price = parseInt(this.getAttribute('data-price'));
      currentPrice = price;
      
      document.getElementById('quick-product').value = product;
      toggleModal('buy-modal', true);
      
      // Обновляем стоимость
      updateTotalPrice();
    });
  });
  
  // Закрытие модальных окон
  closeModal.addEventListener('click', function() {
    toggleModal('buy-modal', false);
  });
  
  closeErrorModal.addEventListener('click', function() {
    toggleModal('error-modal', false);
  });
  
  // Закрытие при клике вне окна
  window.addEventListener('click', function(event) {
    if (event.target === modal) {
      toggleModal('buy-modal', false);
    }
    if (event.target === document.getElementById('error-modal')) {
      toggleModal('error-modal', false);
    }
    if (event.target === document.getElementById('success-modal')) {
      toggleModal('success-modal', false);
    }
  });
  
  // Обновление стоимости при изменении количества
  quantityInput.addEventListener('input', updateTotalPrice);
  
  // Обработка быстрого заказа с защитой
  if (quickOrderForm) {
    quickOrderForm.addEventListener('submit', async function(e) {
      e.preventDefault();
      
      // Скрываем предыдущие ошибки
      hideError('quantity-error');
      hideError('address-error');
      hideError('quick-phone-error');
      
      // Проверка honeypot
      if (checkHoneypot(this)) {
        console.log('Bot detected via honeypot');
        return;
      }
      
      // Проверка частоты запросов
      if (!checkRateLimit()) {
        showError('quick-phone-error', 'Слишком много запросов. Пожалуйста, попробуйте через минуту.');
        return;
      }
      
      // Проверка CSRF токена
      const storedToken = localStorage.getItem('csrf_token');
      const formToken = document.getElementById('quick-csrf_token').value;
      if (storedToken !== formToken) {
        console.error('CSRF token mismatch');
        toggleModal('error-modal', true);
        return;
      }
      
      const product = document.getElementById('quick-product').value;
      const quantity = document.getElementById('quantity').value;
      const address = sanitize(document.getElementById('delivery-address').value);
      const phone = sanitize(document.getElementById('quick-phone').value);
      
      // Валидация полей
      let hasError = false;
      
      if (!quantity || quantity < 1) {
        showError('quantity-error', 'Пожалуйста, введите корректное количество');
        hasError = true;
      }
      
      if (!isValidPhone(phone)) {
        showError('quick-phone-error', 'Пожалуйста, введите корректный номер телефона');
        hasError = true;
      }
      
      if (!address || address.length < 10) {
        showError('address-error', 'Пожалуйста, укажите полный адрес доставки');
        hasError = true;
      }
      
      if (hasError) return;
      
      // Форматируем сообщение для Telegram
      const telegramMessage = `
<b>🛒 БЫСТРЫЙ ЗАКАЗ ТОВАРА</b>
<b>Товар:</b> ${product}
<b>Количество:</b> ${quantity} литров
<b>Стоимость:</b> ${currentPrice * parseInt(quantity)} ₽
<b>Адрес доставки:</b> ${address}
<b>Телефон:</b> ${phone}
      `;
      
      try {
        const success = await sendToTelegram(telegramMessage);
        
        if (success) {
          // Закрываем модальное окно заказа
          toggleModal('buy-modal', false);
          
          // Показываем модальное окно успеха
          toggleModal('success-modal', true);
          
          // Сбрасываем форму
          quickOrderForm.reset();
        } else {
          toggleModal('error-modal', true);
        }
      } catch (error) {
        console.error('Ошибка:', error);
        toggleModal('error-modal', true);
      }
    });
  }
  
  // Закрытие модального окна успеха
  const closeSuccessModal = document.getElementById('close-success-modal');
  
  closeSuccessModal.addEventListener('click', function() {
    toggleModal('success-modal', false);
  });
  
  // Анимация для появления секций при скролле
  const animateSections = document.querySelectorAll('.section-animate');
  
  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.classList.add('section-visible');
      }
    });
  }, {
    threshold: 0.1
  });
  
  animateSections.forEach(section => {
    observer.observe(section);
  });
  
  // Анимация для шагов в блоке "Как мы работаем"
  const workflowSteps = document.querySelectorAll('.step-circle');
  
  const stepObserver = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        setTimeout(() => {
          entry.target.classList.add('animate');
        }, 300);
      }
    });
  }, {
    threshold: 0.2
  });
  
  workflowSteps.forEach(step => {
    stepObserver.observe(step);
  });
  
  // Предзагрузка изображений для плавного появления
  const productImages = document.querySelectorAll('.product-image');
  productImages.forEach(img => {
    if (img.complete) {
      img.classList.add('loaded');
    }
  });
});
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/102951378" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
  <script defer src="/register-sw.js"></script>
</body>
</html>
